<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pengumuman Nilai Ulangan</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap');
        body { font-family: 'Poppins', sans-serif; }
        .gradient-bg { background: linear-gradient(135deg, #1e3c72 0%, #2a5298 50%, #1e3c72 100%); position: relative; background-size: 200% 200%; animation: gradient-animation 15s ease infinite; }
        @keyframes gradient-animation { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        .glass-card { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.2); box-shadow: 0 25px 45px rgba(0, 0, 0, 0.1); }
        .result-enter { animation: slideInScale 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        @keyframes slideInScale { 0% { opacity: 0; transform: translateY(30px) scale(0.9); } 100% { opacity: 1; transform: translateY(0) scale(1); } }
        .hover-lift { transition: all 0.3s ease; }
        .hover-lift:hover { transform: translateY(-5px); box-shadow: 0 30px 60px rgba(0, 0, 0, 0.15); }
        select:disabled { background-color: #e9ecef; cursor: not-allowed; }
    </style>
</head>
<body class="gradient-bg min-h-screen">
    <div class="container mx-auto px-4 py-8 relative z-10">
        <!-- Header -->
        <div class="text-center mb-12">
            <h1 class="text-5xl md:text-7xl font-bold text-white mb-6">Pengumuman Nilai</h1>
            <div class="bg-white/20 backdrop-blur-sm rounded-full px-8 py-4 inline-block">
                <p class="text-xl text-white font-medium">
                    ‚ú® Silakan pilih ujian untuk melihat hasil Anda ‚ú®
                </p>
            </div>
        </div>

        <!-- Search Card -->
        <div id="searchCard" class="max-w-md mx-auto mb-8">
            <div class="glass-card rounded-3xl p-8 hover-lift">
                <div class="text-center mb-6">
                    <h3 class="text-xl font-semibold text-gray-800">Cari Nilai Anda</h3>
                </div>
                <div class="mb-4">
                    <label for="ujianSelect" class="block text-sm font-semibold text-gray-700 mb-3">
                        üìö Nama Ujian
                    </label>
                    <select id="ujianSelect"
                        class="w-full px-6 py-4 border-2 border-purple-200 rounded-2xl focus:ring-4 focus:ring-purple-300 text-lg font-medium">
                        <option value="" disabled selected>-- Pilih Ujian --</option>
                    </select>
                </div>
                <div class="mb-4">
                    <label for="tanggalSelect" class="block text-sm font-semibold text-gray-700 mb-3">
                        üóìÔ∏è Tanggal Pelaksanaan
                    </label>
                    <select id="tanggalSelect"
                        class="w-full px-6 py-4 border-2 border-purple-200 rounded-2xl focus:ring-4 focus:ring-purple-300 text-lg font-medium"
                        disabled>
                        <option value="" disabled selected>-- Pilih Tanggal --</option>
                    </select>
                </div>
                <div class="mb-4">
                    <label for="classSelect" class="block text-sm font-semibold text-gray-700 mb-3">
                        üéì Kelas Anda
                    </label>
                    <select id="classSelect"
                        class="w-full px-6 py-4 border-2 border-purple-200 rounded-2xl focus:ring-4 focus:ring-purple-300 text-lg font-medium"
                        disabled>
                        <option value="" disabled selected>-- Kelas akan terisi otomatis --</option>
                        <option value="10">Kelas 10</option>
                        <option value="11">Kelas 11</option>
                        <option value="12">Kelas 12</option>
                    </select>
                </div>
                <div class="mb-6">
                    <label for="nisInput" class="block text-sm font-semibold text-gray-700 mb-3">
                        üìù Nomor Induk Siswa (NIS)
                    </label>
                    <input type="text" id="nisInput" placeholder="Masukkan NIS Anda..."
                        class="w-full px-6 py-4 border-2 border-purple-200 rounded-2xl focus:ring-4 focus:ring-purple-300 text-lg font-medium"
                        disabled>
                </div>
                <button onclick="searchResult()"
                    class="w-full bg-gradient-to-r from-purple-600 to-blue-600 text-white py-4 px-8 rounded-2xl font-bold text-lg transform hover:scale-105 transition-all">
                    üöÄ Cari Nilai
                </button>
            </div>
        </div>

        <!-- Loading Indicator -->
        <div id="loadingIndicator" class="text-center hidden my-16">
            <div class="inline-block animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-white/80"></div>
            <p class="text-white text-lg mt-4 font-semibold">Mencari data...</p>
        </div>

        <!-- Result Card -->
        <div id="resultCard" class="max-w-2xl mx-auto hidden">
            <div class="glass-card rounded-3xl p-8 result-enter hover-lift">
                <div class="text-center mb-8">
                    <div id="statusIcon" class="text-8xl mb-4"></div>
                    <h2 class="text-3xl font-bold mb-2">üéØ Hasil Ulangan Anda</h2>
                    <div class="w-24 h-1 bg-gradient-to-r from-purple-500 to-pink-500 mx-auto rounded-full"></div>
                </div>
                <div class="bg-gradient-to-r from-purple-50 to-pink-50 rounded-2xl p-6 mb-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="flex items-center space-x-3">
                            <p class="text-sm text-gray-600 font-medium">NIS:</p>
                            <p id="resultNIS" class="font-bold text-gray-800 text-lg"></p>
                        </div>
                        <div class="flex items-center space-x-3">
                            <p class="text-sm text-gray-600 font-medium">Nama:</p>
                            <p id="resultName" class="font-bold text-gray-800 text-lg"></p>
                        </div>
                        <div class="col-span-1 md:col-span-2 mt-4 border-t pt-4">
                            <div class="flex items-center space-x-3">
                                <p class="text-sm text-gray-600 font-medium">Ujian:</p>
                                <p id="resultNamaUjian" class="font-bold text-gray-800 text-lg"></p>
                            </div>
                            <div class="flex items-center space-x-3 mt-2">
                                <p class="text-sm text-gray-600 font-medium">Materi:</p>
                                <p id="resultMateriUjian" class="font-bold text-gray-800 text-lg"></p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="text-center mb-8">
                    <div class="relative inline-block">
                        <div class="w-32 h-32 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center mx-auto mb-4">
                            <span id="resultScore" class="text-4xl font-bold text-white">0</span>
                        </div>
                        <div class="absolute -bottom-2 left-1/2 transform -translate-x-1/2">
                            <span id="resultStatus" class="px-6 py-2 rounded-full font-bold text-sm shadow-lg"></span>
                        </div>
                    </div>
                </div>
                <div class="bg-gradient-to-br from-blue-50 to-purple-50 rounded-2xl p-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-6">üìä Detail Skor</h3>
                    <div class="space-y-4">
                        <div class="flex items-center justify-between bg-white rounded-xl p-4 shadow-sm">
                            <p class="font-semibold text-gray-800">Pilihan Ganda</p>
                            <span id="resultPG" class="text-2xl font-bold text-blue-600"></span>
                        </div>
                        <div id="praktikContainer"
                            class="hidden flex items-center justify-between bg-white rounded-xl p-4 shadow-sm">
                            <p class="font-semibold text-gray-800">Nilai Praktik</p>
                            <span id="resultPraktik" class="text-2xl font-bold text-green-600"></span>
                        </div>
                        <div>
                            <div class="flex items-center justify-between bg-white rounded-xl p-4 shadow-sm">
                                <p class="font-semibold text-gray-800">Soal Essay</p>
                                <div>
                                    <span id="totalEssay" class="text-2xl font-bold text-purple-600">0</span>
                                    <span id="maxEssay" class="text-gray-600 font-medium"></span>
                                </div>
                            </div>
                            <div class="grid grid-cols-5 gap-3 mt-4">
                                <div id="essay1"
                                    class="text-center bg-white rounded-xl py-3 px-2 text-lg font-bold shadow-sm"></div>
                                <div id="essay2"
                                    class="text-center bg-white rounded-xl py-3 px-2 text-lg font-bold shadow-sm"></div>
                                <div id="essay3"
                                    class="text-center bg-white rounded-xl py-3 px-2 text-lg font-bold shadow-sm"></div>
                                <div id="essay4"
                                    class="text-center bg-white rounded-xl py-3 px-2 text-lg font-bold shadow-sm"></div>
                                <div id="essay5"
                                    class="text-center bg-white rounded-xl py-3 px-2 text-lg font-bold shadow-sm"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <button onclick="resetSearch()"
                    class="w-full mt-8 bg-gray-600 text-white py-4 px-6 rounded-2xl font-bold hover:bg-gray-700 transition-all">
                    Cari Lagi
                </button>
            </div>
        </div>

        <!-- Not Found Card -->
        <div id="notFoundCard" class="max-w-lg mx-auto hidden">
            <div class="glass-card rounded-3xl p-8 result-enter text-center">
                <div class="text-8xl mb-6">‚ùå</div>
                <h2 class="text-3xl font-bold text-red-500 mb-4">Data Tidak Ditemukan</h2>
                <p class="text-gray-600 mb-8">Pastikan semua data yang Anda masukkan sudah benar.</p>
                <button onclick="resetSearch()"
                    class="bg-purple-600 text-white py-4 px-8 rounded-2xl font-bold hover:bg-purple-700 transition-all">
                    üîÑ Coba Lagi
                </button>
            </div>
        </div>

        <!-- Footer -->
        <div class="text-center mt-16">
            <div class="bg-white/10 backdrop-blur-sm rounded-full px-6 py-3 inline-block">
                <p class="text-white/80 text-sm font-medium">
                    Kelas Informatika | Anthonio Akbar, S.Pd.
                </p>
            </div>
        </div>
    </div>

    <script>
        // --- AREA DATA UJIAN ---
        const dataSemuaUjian = {
            "ULANGAN1": {
                "10": 
                { namaUjian: "Ulangan Sumatif BAB", 
                materi: "Informatika", 
                bab: "Berpikir Komputasional (Dekomposisi, Pengenalan Pola, Abstraksi, Algoritma)", 
                tanggal: "Kamis, 4 September 2025", 
                dataSiswa: [ 
                    { nis: "123456789", nama: "Anthonio Akbar", nilai: 100, keterangan: "LULUS", skorPG: "12 / 20", essay: [12, 12, 12, 12, 12] }, 
                    { nis: "252610002", nama: "Fara Adzkadina Saraswati", nilai: 93, keterangan: "LULUS", skorPG: "19 / 20", essay: [10, 10, 12, 11, 12] }, 
                    { nis: "252610003", nama: "Hana Hanifah", nilai: 55, keterangan: "REMED", skorPG: "11 / 20", essay: [4, 11, 5, 6, 7] }, 
                    { nis: "252610004", nama: "Ibrahim Sakti", nilai: 36, keterangan: "REMED", skorPG: "8 / 20", essay: [4, 4, 4, 4, 4] }, 
                    { nis: "252610005", nama: "Nabila Marzaqah", nilai: 85, keterangan: "LULUS", skorPG: "18 / 20", essay: [11, 10, 10, 8, 10] }, 
                    { nis: "252610006", nama: "Safira Wulandari", nilai: 54, keterangan: "REMED", skorPG: "9 / 20", essay: [12, 12, 0, 12, 0] },
                    { nis: "252610007", nama: "Syahreza Hakim Firjatullah", nilai: 86, keterangan: "LULUS", skorPG: "17 / 20", essay: [11, 11, 10, 10, 10] },  
                ] },
                // "11": 
                // { namaUjian: "Ulangan Sumatif BAB", 
                // materi: "Informatika", 
                // bab: "Algoritma dan Pemrograman", 
                // tanggal: "Jumat, 5 September 2025", 
                // dataSiswa: [ 
                //     { nis: "11001", nama: "Budi Santoso", nilai: 88, keterangan: "LULUS", skorPG: "18 / 20", essay: [10, 11, 10, 12, 9] }, 
                //     { nis: "11002", nama: "Mark", nilai: 72, keterangan: "REMED", skorPG: "14 / 20", essay: [8, 7, 9, 8, 8] }, 
                // ] },
                "12": 
                { namaUjian: "Ujian Sumatif BAB", 
                materi: "Informatika", 
                bab: "Jaringan Komputer dan Internet", 
                tanggal: "Kamis, 4 September 2025", 
                dataSiswa: [ 
                    { nis: "232410001", nama: "Adnan Alfaridzi Rahman", nilai: 59, keterangan: "REMED", skorPG: "8 / 15", essay: [2, 1, 2, 1, 2], praktik:"10 / 12" }, 
                    { nis: "232410004", nama: "Amira Nadhifa Zahida", nilai: 77, keterangan: "LULUS", skorPG: "11 / 15", essay: [5, 5, 3, 3, 2], praktik:"10 / 12" }, 
                    { nis: "232410010", nama: "Mozza Adia Zahra Mukti", nilai: 74, keterangan: "REMED", skorPG: "11 / 15", essay: [2, 3, 3, 3, 2], praktik:"11 / 12" }, 
                    { nis: "242511022", nama: "Nuri Rafa Javisa", nilai: 70, keterangan: "REMED", skorPG: "10 / 15", essay: [2, 3, 1, 3, 2], praktik:"11 / 12" }, 
                    { nis: "232410016", nama: "Nabila Safira Kristina", nilai: 73, keterangan: "REMED", skorPG: "10 / 15", essay: [2, 4, 2, 1, 2], praktik:"12 / 12" }, 
                    { nis: "232410020", nama: "Susan Siti Nurpianti", nilai: 86, keterangan: "LULUS", skorPG: "13 / 15", essay: [5, 4, 3, 4, 1], praktik:"12 / 12" }, 
                    { nis: "232410022", nama: "Zakia Attiya", nilai: 92, keterangan: "LULUS", skorPG: "13 / 15", essay: [5, 5, 5, 5, 2], praktik:"12 / 12" } 
                ] }
            },
            // "UTS_GANJIL2526": {
            //      "10": 
            //      { namaUjian: "Ujian Tengah Semester Ganjil", 
            //      materi: "Informatika", 
            //      bab: "Berpikir Komputasional", 
            //      tanggal: "Senin, 10 Oktober 2025", 
            //      dataSiswa: [ 
            //         { nis: "123456789", nama: "Anthonio Akbar", nilai: 95, keterangan: "LULUS", skorPG: "18 / 20", essay: [12, 12, 10, 11, 12] } 
            //     ] },
            //      "11": 
            //      { namaUjian: "Ujian Tengah Semester Ganjil", 
            //      materi: "Informatika", 
            //      bab: "Jaringan Komputer", 
            //      tanggal: "Selasa, 11 Oktober 2025", 
            //      dataSiswa: [ 
            //         { nis: "11001", nama: "Budi Santoso", nilai: 80, keterangan: "LULUS", skorPG: "15 / 20", essay: [10, 10, 10, 10, 10] } 
            //     ] }
            // }
        };

        // Mengambil elemen-elemen input
        const ujianSelect = document.getElementById('ujianSelect');
        const tanggalSelect = document.getElementById('tanggalSelect');
        const classSelect = document.getElementById('classSelect');
        const nisInput = document.getElementById('nisInput');

        // FUNGSI UNTUK MENGISI DROPDOWN UJIAN DI AWAL
        function populateUjianOptions() {
            // Menggunakan Set untuk memastikan nama ujian unik
            const namaUjianUnik = new Map();
            for (const idUjian in dataSemuaUjian) {
                const infoKelas = dataSemuaUjian[idUjian]["10"] || dataSemuaUjian[idUjian]["11"] || dataSemuaUjian[idUjian]["12"];
                if (infoKelas && !namaUjianUnik.has(infoKelas.namaUjian)) {
                    namaUjianUnik.set(infoKelas.namaUjian, idUjian);
                }
            }

            namaUjianUnik.forEach((idUjian, namaUjian) => {
                const option = document.createElement('option');
                option.value = idUjian;
                option.textContent = namaUjian;
                ujianSelect.appendChild(option);
            });
        }

        // FUNGSI UNTUK UPDATE DROPDOWN TANGGAL BERDASARKAN UJIAN
        function updateTanggalOptions() {
            const idUjian = ujianSelect.value;
            // Reset dan nonaktifkan pilihan berikutnya
            tanggalSelect.innerHTML = '<option value="" disabled selected>-- Pilih Tanggal --</option>';
            classSelect.value = '';
            tanggalSelect.disabled = true;
            classSelect.disabled = true;
            nisInput.disabled = true;

            if (idUjian && dataSemuaUjian[idUjian]) {
                const dataUjian = dataSemuaUjian[idUjian];
                for (const kelas in dataUjian) {
                    const option = document.createElement('option');
                    // Value dari tanggal adalah kelasnya
                    option.value = kelas; 
                    option.textContent = `${dataUjian[kelas].tanggal} (Kelas ${kelas})`;
                    tanggalSelect.appendChild(option);
                }
                tanggalSelect.disabled = false;
            }
        }
        
        // FUNGSI UNTUK UPDATE KELAS BERDASARKAN TANGGAL
        function updateKelasOption() {
            const kelas = tanggalSelect.value;
            if (kelas) {
                classSelect.value = kelas;
                nisInput.disabled = false;
                nisInput.focus();
            }
        }

        // Event Listeners untuk dropdown dinamis
        ujianSelect.addEventListener('change', updateTanggalOptions);
        tanggalSelect.addEventListener('change', updateKelasOption);


        function searchResult() {
            const idUjian = ujianSelect.value;
            const kelas = classSelect.value;
            const nis = nisInput.value.trim();
            
            if (!idUjian || !kelas || !nis) {
                alert('‚ö†Ô∏è Pastikan semua data (Ujian, Tanggal, Kelas, dan NIS) sudah terisi.');
                return;
            }

            document.getElementById('searchCard').classList.add('hidden');
            document.getElementById('loadingIndicator').classList.remove('hidden');

            setTimeout(() => {
                const dataUjianAktif = dataSemuaUjian[idUjian];
                const dataKelas = dataUjianAktif ? dataUjianAktif[kelas] : null;
                const student = dataKelas ? dataKelas.dataSiswa.find(s => s.nis === nis) : null;
                
                document.getElementById('loadingIndicator').classList.add('hidden');

                if (student) {
                    showResult(student, kelas, dataKelas); 
                } else {
                    showNotFound();
                }
            }, 1000);
        }

        function showResult(student, studentClass, infoUjian) {
            document.getElementById('notFoundCard').classList.add('hidden');
            document.getElementById('resultNIS').textContent = student.nis;
            document.getElementById('resultName').textContent = student.nama;
            document.getElementById('resultNamaUjian').textContent = `${infoUjian.namaUjian} (${infoUjian.tanggal})`;
            document.getElementById('resultMateriUjian').textContent = `${infoUjian.materi} - Bab ${infoUjian.bab}`;
            
            animateValue(document.getElementById('resultScore'), 0, student.nilai, 1000);
            const statusElement = document.getElementById('resultStatus');
            const iconElement = document.getElementById('statusIcon');
            if (student.keterangan === 'LULUS') {
                statusElement.textContent = 'LULUS';
                statusElement.className = 'px-6 py-2 rounded-full font-bold text-sm shadow-lg bg-green-500 text-white';
                iconElement.textContent = 'üèÜ';
            } else {
                statusElement.textContent = 'REMEDIAL';
                statusElement.className = 'px-6 py-2 rounded-full font-bold text-sm shadow-lg bg-orange-500 text-white';
                iconElement.textContent = 'üí™';
            }
            document.getElementById('resultPG').textContent = student.skorPG;
            const praktikContainer = document.getElementById('praktikContainer');
            if (studentClass === '12' && student.praktik) {
                document.getElementById('resultPraktik').textContent = student.praktik;
                praktikContainer.classList.remove('hidden');
            } else {
                praktikContainer.classList.add('hidden');
            }
            const maxEssayScore = (studentClass === '12') ? 5 : 12;
            const totalMaxEssay = maxEssayScore * 5;
            document.getElementById('maxEssay').textContent = `/ ${totalMaxEssay}`;
            const totalEssay = student.essay.reduce((sum, score) => sum + score, 0);
            animateValue(document.getElementById('totalEssay'), 0, totalEssay, 1000);
            student.essay.forEach((score, i) => {
                const essayElement = document.getElementById(`essay${i + 1}`);
                essayElement.textContent = score;
                const percentage = (score / maxEssayScore) * 100;
                if (percentage >= 80) { essayElement.className = 'text-center bg-green-100 text-green-800 rounded-xl py-3 px-2 text-lg font-bold shadow-sm'; } 
                else if (percentage >= 60) { essayElement.className = 'text-center bg-yellow-100 text-yellow-800 rounded-xl py-3 px-2 text-lg font-bold shadow-sm'; } 
                else { essayElement.className = 'text-center bg-red-100 text-red-800 rounded-xl py-3 px-2 text-lg font-bold shadow-sm'; }
            });
            document.getElementById('resultCard').classList.remove('hidden');
        }

        // --- FUNGSI UTILITAS LAINNYA ---
        function animateValue(obj, start, end, duration) { let startTimestamp = null; const step = (timestamp) => { if (!startTimestamp) startTimestamp = timestamp; const progress = Math.min((timestamp - startTimestamp) / duration, 1); obj.innerHTML = Math.floor(progress * (end - start) + start); if (progress < 1) { window.requestAnimationFrame(step); } }; window.requestAnimationFrame(step); }
        function showNotFound() { document.getElementById('resultCard').classList.add('hidden'); document.getElementById('notFoundCard').classList.remove('hidden'); }
        function resetSearch() { document.getElementById('resultCard').classList.add('hidden'); document.getElementById('notFoundCard').classList.add('hidden'); document.getElementById('searchCard').classList.remove('hidden'); nisInput.value = ''; ujianSelect.value = ''; updateTanggalOptions(); }
        document.getElementById('nisInput').addEventListener('keypress', function(e) { if (e.key === 'Enter') { searchResult(); } });

        // Saat halaman dimuat, jalankan fungsi untuk mengisi dropdown ujian
        window.onload = function() {
            populateUjianOptions();
        };
    </script>
</body>
</html>